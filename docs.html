<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<title>habby - Documentation</title>

	<script async src="https://www.googletagmanager.com/gtag/js?id=G-3FXEQKVEKL"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());
		gtag('config', 'G-3FXEQKVEKL');
	</script>

	<meta content="Documentation for habby - a beautiful, distraction-free digital bullet journal and habit tracking app." name="description">
	<link href="https://habby.day/docs" rel="canonical">
	<link href="favicon.ico" rel="icon" type="image/png">
	<link href="apple-touch-icon.png" rel="apple-touch-icon">
	
	<link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Amiri:ital@0;1&family=Inter:wght@200;400;600&display=swap" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.0/feather.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.8.0/mermaid.min.js"></script>

	<style>
		:root {
			--color-primary: #B6C7AA;
			--color-secondary: #F6E6CB;
			--color-accent: #65647C;
			--color-text-primary: #4A4947;
			--color-text-secondary: #686764;
			--color-1: #e4a0a6;
			--color-2: #d4a0b6;
			--color-3: #c4a0c6;
			--color-4: #b4a0d6;
			--color-5: #a4a0e6;
		}

		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		body {
			font-family: 'Inter', sans-serif;
			background-color: var(--color-secondary);
			color: var(--color-text-primary);
			line-height: 1.6;
		}

		.container {
			max-width: 1200px; /* Increased from 1000px for more width */
			margin: 0 auto;
			padding: 2rem;
		}

		.header {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 1rem;
			margin-bottom: 2.5rem; /* Increased spacing */
		}

		.app-icon {
			width: 80px;
			height: 80px;
			border-radius: 20px;
			overflow: hidden;
		}

		.app-icon img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		h1 {
			font-family: 'Amiri', serif;
			font-size: 3rem;
			font-weight: bold;
			margin: 0;
			color: var(--color-text-primary);
			letter-spacing: -0.02em;
		}
        
        .docs-container {
            display: flex;
            gap: 3rem; /* Increased from 2rem for better separation */
        }
        
        .docs-sidebar {
            width: 250px;
            flex-shrink: 0;
        }
        
        .docs-content {
            flex: 1;
            background-color: #fff;
            padding: 3rem; /* Increased from 2.5rem */
            border-radius: 12px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08); /* Enhanced shadow */
            min-height: 500px; /* Increased from 400px */
            max-width: 900px; /* Added max-width to prevent stretching too wide */
        }
        
        .docs-content img {
            max-width: 100%;
            border-radius: 4px;
            margin: 1.5rem 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .docs-content h1 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: var(--color-text-primary);
        }
        
        .docs-content h2 {
            font-size: 1.8rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: var(--color-text-primary);
        }
        
        .docs-content h3 {
            font-size: 1.4rem;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            color: var(--color-text-primary);
        }
        
        .docs-content p {
            margin-bottom: 1.2rem;
            line-height: 1.7;
        }
        
        .docs-content ul, .docs-content ol {
            margin-bottom: 1.2rem;
            padding-left: 2.5rem; /* Increased from default */
        }
        
        .docs-content li {
            margin-bottom: 0.5rem;
        }
        
        .docs-content ul li::marker {
            color: var(--color-accent);
        }
        
        .docs-content pre {
            background-color: #f5f5f5;
            padding: 1.2rem;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1.5rem 0;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .docs-content code {
            background-color: #f5f5f5;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: monospace;
            font-size: 0.9em;
            color: #d23669;
        }
        
        .docs-content pre code {
            padding: 0;
            background-color: transparent;
            color: var(--color-text-primary);
        }
        
        .docs-content table {
            border-collapse: collapse;
            width: 100%;
            margin: 1.5rem 0;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
        }
        
        .docs-content th, .docs-content td {
            border: 1px solid #ddd;
            padding: 0.8rem 1rem;
            text-align: left;
        }
        
        .docs-content th {
            background-color: #f5f5f5;
            font-weight: 500;
            color: var(--color-accent);
        }
        
        .docs-content tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .docs-content blockquote {
            border-left: 4px solid var(--color-primary);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            background-color: rgba(182, 199, 170, 0.1);
            border-radius: 0 6px 6px 0;
            color: var(--color-text-secondary);
        }
        
        .docs-content blockquote p:last-child {
            margin-bottom: 0;
        }
        
        .docs-sidebar ul {
            list-style: none;
            padding-left: 0;
        }
        
        .docs-sidebar .nested-list {
            padding-left: 1.2rem; /* Increased from 1rem */
            margin-bottom: 1.2rem;
        }
        
        .docs-sidebar li {
            margin-bottom: 0.5rem;
        }
        
        .docs-sidebar a {
            color: var(--color-text-primary);
            text-decoration: none;
            display: block;
            padding: 0.6rem 0.8rem;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.95rem;
        }
        
        .docs-sidebar a:hover {
            background-color: rgba(182, 199, 170, 0.15);
            transform: translateX(2px);
        }
        
        .docs-sidebar a.active {
            background-color: var(--color-primary);
            color: #fff;
            font-weight: 500;
        }
        
        .docs-sidebar .section-header {
            margin-top: 1.8rem; /* Increased from 1.5rem */
            margin-bottom: 0.8rem;
        }
        
        .docs-sidebar .section-header h4 {
            font-size: 1rem;
            color: var(--color-accent);
            margin: 0;
            padding: 0.4rem 0.8rem;
            font-weight: 600;
            letter-spacing: 0.03em;
        }

		footer {
			margin-top: 3rem; /* Increased from 2rem */
			color: var(--color-text-secondary);
			font-size: 0.9rem;
            text-align: center;
            padding: 1rem 0;
		}

		footer a {
			color: var(--color-text-secondary);
			text-decoration: none;
			border-bottom: 1px solid currentColor;
            transition: color 0.2s ease;
		}

		footer a:hover {
			color: var(--color-accent);
		}
        
        .back-to-home {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--color-text-primary);
            text-decoration: none;
            font-weight: 500;
            margin-bottom: 1rem;
            transition: all 0.2s ease;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            background-color: rgba(255,255,255,0.5);
        }
        
        .back-to-home:hover {
            background-color: rgba(255,255,255,0.8);
            transform: translateY(-2px);
        }
        
        .error-message {
            padding: 1.5rem;
            background-color: rgba(255, 0, 0, 0.1);
            border-left: 4px solid #ff0000;
            margin-bottom: 1.5rem;
            border-radius: 0 6px 6px 0;
        }
        
        .loading-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }
        
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--color-primary);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

		@media (max-width: 992px) {
            .container {
                max-width: 100%;
                padding: 1.5rem;
            }
            
            .docs-content {
                padding: 2rem;
            }
        }
        
		@media (max-width: 768px) {
			.container {
				padding: 1rem;
			}
            
            .docs-container {
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .docs-sidebar {
                width: 100%;
            }
            
            .docs-content {
                padding: 1.5rem;
                max-width: 100%;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .docs-content h1 {
                font-size: 2rem;
            }
            
            .docs-content h2 {
                font-size: 1.5rem;
            }
            
            .docs-content h3 {
                font-size: 1.2rem;
            }
		}
	</style>
</head>

<body>
	<div class="container">
		<div class="header">
			<div class="app-icon">
				<img alt="Habby app icon" src="icon.png">
			</div>
			<h1>habby documentation</h1>
            <a href="index.html" class="back-to-home">
                <i data-feather="arrow-left"></i>
                Back to homepage
            </a>
		</div>
        
        <div class="docs-container">
            <div class="docs-sidebar" id="sidebar">
                <h3>Documentation</h3>
                <div id="sidebar-content">
                    <div class="loading-indicator">
                        <div class="loading-spinner"></div>
                    </div>
                </div>
            </div>
            
            <div class="docs-content" id="content">
                <div class="loading-indicator">
                    <div class="loading-spinner"></div>
                </div>
            </div>
        </div>

		<footer>
			<p>© 2025 Habby. • <a target="_blank" href="https://bored.cat">Albert C</a> • <a
					href="privacy-policy.html">Privacy
					Policy</a></p>
		</footer>
	</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const content = document.getElementById('content');
            const sidebarContent = document.getElementById('sidebar-content');
            let activeLink = null;
            
            // Structure that matches the actual documentation folders
            const docStructure = {
                "overview": {
                    path: "README.md",
                    label: "Overview"
                },
                "architecture": {
                    label: "Architecture",
                    children: {
                        "overview": {
                            path: "architecture/overview.md",
                            label: "Overview"
                        },
                        "state-management": {
                            path: "architecture/state-management.md",
                            label: "State Management"
                        },
                        "component-structure": {
                            path: "architecture/component-structure.md",
                            label: "Component Structure"
                        },
                        "data-flow": {
                            path: "architecture/data-flow.md",
                            label: "Data Flow"
                        },
                        "component-reference": {
                            path: "architecture/component-reference.md",
                            label: "Component Reference"
                        },
                        "performance-optimizations": {
                            path: "architecture/performance-optimizations.md",
                            label: "Performance Optimizations"
                        },
                        "internationalization": {
                            path: "architecture/internationalization.md",
                            label: "Internationalization"
                        }
                    }
                },
                "features": {
                    label: "Features",
                    children: {
                        "journal-entries": {
                            path: "features/journal-entries.md",
                            label: "Journal Entries"
                        },
                        "habit-tracking": {
                            path: "features/habit-tracking.md",
                            label: "Habit Tracking"
                        },
                        "monthly-goals": {
                            path: "features/monthly-goals.md",
                            label: "Monthly Goals"
                        },
                        "statistics": {
                            path: "features/statistics.md",
                            label: "Statistics"
                        },
                        "customization": {
                            path: "features/customization.md",
                            label: "Customization"
                        },
                        "data-management": {
                            path: "features/data-management.md",
                            label: "Data Management"
                        }
                    }
                },
                "user-flows": {
                    label: "User Flows",
                    children: {
                        "daily-checkin": {
                            path: "user-flows/daily-checkin.md",
                            label: "Daily Check-in"
                        },
                        "monthly-habit-management": {
                            path: "user-flows/monthly-habit-management.md",
                            label: "Monthly Habit Management"
                        },
                        "goal-setting": {
                            path: "user-flows/goal-setting.md",
                            label: "Goal Setting"
                        },
                        "onboarding": {
                            path: "user-flows/onboarding.md",
                            label: "Onboarding"
                        }
                    }
                },
                "diagrams": {
                    label: "Diagrams",
                    children: {
                        "app-architecture-diagram": {
                            path: "diagrams/app-architecture-diagram.md",
                            label: "App Architecture"
                        },
                        "user-journey-map": {
                            path: "diagrams/user-journey-map.md",
                            label: "User Journey Map"
                        },
                        "data-flow-diagrams": {
                            path: "diagrams/data-flow-diagrams.md",
                            label: "Data Flow Diagrams"
                        }
                    }
                }
            };
            
            // Build sidebar from structure
            function buildSidebar() {
                let sidebarHTML = '<ul>';
                
                // Add overview as first item
                sidebarHTML += `<li><a href="#" class="doc-link" data-path="${docStructure.overview.path}">${docStructure.overview.label}</a></li>`;
                
                // Add remaining sections
                Object.entries(docStructure).forEach(([key, section]) => {
                    if (key === 'overview') return; // Skip overview as we already added it
                    
                    if (section.children) {
                        sidebarHTML += `
                            <li class="section-header"><h4>${section.label}</h4></li>
                            <li>
                                <ul class="nested-list">
                        `;
                        
                        Object.entries(section.children).forEach(([childKey, child]) => {
                            sidebarHTML += `<li><a href="#" class="doc-link" data-path="${child.path}">${child.label}</a></li>`;
                        });
                        
                        sidebarHTML += `
                                </ul>
                            </li>
                        `;
                    } else {
                        sidebarHTML += `<li><a href="#" class="doc-link" data-path="${section.path}">${section.label}</a></li>`;
                    }
                });
                
                sidebarHTML += '</ul>';
                sidebarContent.innerHTML = sidebarHTML;
                
                // Add event listeners to links
                document.querySelectorAll('.doc-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        loadDocument(link.getAttribute('data-path'), link);
                    });
                });
            }
            
            // Load a document
            function loadDocument(path, linkElement) {
                // Update active link
                if (activeLink) {
                    activeLink.classList.remove('active');
                }
                if (linkElement) {
                    linkElement.classList.add('active');
                    activeLink = linkElement;
                }
                
                // Show loading indicator
                content.innerHTML = `
                    <div class="loading-indicator">
                        <div class="loading-spinner"></div>
                    </div>
                `;
                
                // For GitHub Pages deployment
                fetch(`docs/${path}`)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Document not found: ${path}`);
                        }
                        return response.text();
                    })
                    .then(markdown => {
                        // Use marked to convert markdown to HTML
                        const html = marked.parse(markdown);
                        content.innerHTML = html;
                        
                        // Fix relative links
                        fixLinks();
                        
                        // Fix relative image paths
                        fixImagePaths(path);
                        
                        // Update window location with hash
                        const docId = path.replace(/\//g, '-').replace('.md', '');
                        history.replaceState(null, null, `#${docId}`);
                    })
                    .catch(error => {
                        content.innerHTML = `
                            <div class="error-message">
                                <h3>Error Loading Document</h3>
                                <p>${error.message}</p>
                            </div>
                            <p>Please select another document from the sidebar.</p>
                        `;
                        console.error('Error loading document:', error);
                    });
            }
            
            // Fix relative links in content
            function fixLinks() {
                const links = content.querySelectorAll('a');
                links.forEach(link => {
                    const href = link.getAttribute('href');
                    if (href && href.endsWith('.md') && !href.startsWith('http')) {
                        // Convert relative markdown links to doc-links
                        link.setAttribute('data-path', href);
                        link.setAttribute('href', '#');
                        link.classList.add('doc-link');
                        
                        // Add click event
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            loadDocument(link.getAttribute('data-path'), null);
                        });
                    }
                });
            }
            
            // Fix relative image paths in content
            function fixImagePaths(currentPath) {
                const images = content.querySelectorAll('img');
                images.forEach(img => {
                    const src = img.getAttribute('src');
                    if (src && !src.startsWith('http') && !src.startsWith('/')) {
                        // Get directory from current path
                        const dir = currentPath.substring(0, currentPath.lastIndexOf('/') + 1);
                        let imgPath = src;
                        
                        // Handle relative paths
                        if (src.startsWith('./')) {
                            imgPath = src.substring(2);
                        } else if (src.startsWith('../')) {
                            // Go up one directory
                            const dirParts = dir.split('/');
                            dirParts.pop(); // Remove last directory
                            dirParts.pop(); // Remove empty string after last slash
                            imgPath = dirParts.join('/') + '/' + src.substring(3);
                        }
                        
                        img.setAttribute('src', `docs/${dir}${imgPath}`);
                    }
                });
            }
            
            // Load initial document based on hash or default to README.md
            function loadInitialDocument() {
                const hash = window.location.hash.substring(1);
                if (hash) {
                    // Convert hash back to path
                    const parts = hash.split('-');
                    let path;
                    
                    if (parts[0] === 'README') {
                        path = 'README.md';
                    } else {
                        path = parts.join('/') + '.md';
                    }
                    
                    // Find matching link
                    const link = document.querySelector(`[data-path="${path}"]`);
                    if (link) {
                        loadDocument(path, link);
                    } else {
                        loadDocument('README.md', document.querySelector('[data-path="README.md"]'));
                    }
                } else {
                    loadDocument('README.md', document.querySelector('[data-path="README.md"]'));
                }
            }
            
            // Initialize
            buildSidebar();
            setTimeout(() => {
                loadInitialDocument();
            }, 100);
        });
        
        // Initialize Feather icons
        feather.replace();
    </script>
</body>

</html>
